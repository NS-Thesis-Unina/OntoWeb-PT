sequenceDiagram
    actor U as Utente
    participant R as Router / Layout
    participant H as Pagina HTTP Requests
    participant S as HttpRequestsService (backend)
    participant G as DataGrid

    U->>R: Clic su voce "HTTP Requests" nella nav laterale
    R->>H: Monta componente HttpRequestsPage (/http-requests)
    activate H

    H->>H: inizializza stato (page=0, pageSize=100, filtersApplied={}, initialLoad=true, loading=true)
    H->>H: mostra Backdrop con spinner (tabella nascosta)

    H->>S: listHttpRequests(offset=0, limit=100, filtri={})
    activate S
    S-->>H: { rows, total, pageMeta }
    deactivate S

    H->>H: aggiorna stato (rows, pagination, loading=false, initialLoad=false)
    H->>H: nasconde Backdrop
    H->>G: render DataGrid con rows e rowCount

    deactivate H

    %% Reload successivo (paginazione o filtri) â€“ nessun Backdrop
    U->>G: Interazione che provoca reload (es. cambio pagina o Apply filtri)
    G->>H: onPageChange/onFiltersApplied(...)
    activate H
    H->>H: calcola offset/limit, mantiene filtersApplied imposta loading=true (senza Backdrop)
    H->>S: listHttpRequests(offset, limit, filtriApplied)
    activate S
    S-->>H: nuovi { rows, total, pageMeta }
    deactivate S
    H->>H: aggiorna stato (rows, pagination, loading=false)
    H->>G: aggiorna DataGrid (spinner integrato nella griglia)
    deactivate H
